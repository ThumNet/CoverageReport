// source from: https://github.com/davglass/lcov-parse/blob/master/lib/index.js (ac888aa  on Jun 17, 2014)
function lcov_parse(e,i){var r,a=[];["end_of_record"].concat(e.split("\n")).forEach(function(e){var i,s,t=(e=e.trim()).split(":"),n=[t.shift(),t.join(":")];switch(n[0].toUpperCase()){case"TN":r.title=n[1].trim();break;case"SF":r.file=n.slice(1).join(":").trim();break;case"FNF":r.functions.found=Number(n[1].trim());break;case"FNH":r.functions.hit=Number(n[1].trim());break;case"LF":r.lines.found=Number(n[1].trim());break;case"LH":r.lines.hit=Number(n[1].trim());break;case"DA":i=n[1].split(","),r.lines.details.push({line:Number(i[0]),hit:Number(i[1])});break;case"FN":s=n[1].split(","),r.functions.details.push({name:s[1],line:Number(s[0])});break;case"FNDA":s=n[1].split(","),r.functions.details.some(function(e,i){if(e.name===s[1]&&void 0===e.hit)return r.functions.details[i].hit=Number(s[0]),!0});break;case"BRDA":s=n[1].split(","),r.branches.details.push({line:Number(s[0]),block:Number(s[1]),branch:Number(s[2]),taken:"-"===s[3]?0:Number(s[3])});break;case"BRF":r.branches.found=Number(n[1]);break;case"BRH":r.branches.hit=Number(n[1])}-1<e.indexOf("end_of_record")&&(a.push(r),r={lines:{found:0,hit:0,details:[]},functions:{hit:0,found:0,details:[]},branches:{hit:0,found:0,details:[]}})}),a.shift(),a.length?i(null,a):i("Failed to parse string")}